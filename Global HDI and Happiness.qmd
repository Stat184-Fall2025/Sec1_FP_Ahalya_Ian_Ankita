---
title: "Global HDI and Happiness"
author: "Ahalya Kudalugodaarachchi, Ian Wang, Ankita Bhattacharyya"
date: "Dec. 17, 2025"
date-modified: now
format: 
  html:
    embed-resources: true
    fig-align: center
    number-depth: 5
    toc: false
    link-external-newwindow: true
    cap-location: top
    geometry: 
      - top=1in
      - left=1in
      - right=1in
      - bottom=1in
execute: 
  echo: false
  warning: false
editor: visual
---

## Exploratory Data Analysis

### Satisfying FAIR Principles - Human Development Index (HDI) Data Set

Findable - The data is collected from the United Nations. Because of this, the data is very reliable. Also, the original table contains all of the descriptions for certain terminology. Especially what's considered "High HDI", "Medium HDI", and "Low HDI", all have their definitions listed at the bottom.

Accessible - It's freely accessible and available in the Excel format. The report from the year is also posted in a link that leads to the pdf in the same webpage.

Interoperable - At the end of the provided report, it contains all of the survey questions that were used in the interviews that took place for the countries. However, the country names themselves are not the "standardized" ones and therefore, it would be difficult to use other data tables with that of the HDI table.

Reusable - All of the other columns in the data table are used to calculate the HDI and from there the HDI rank. Therefore, the attributes listed are all important to the argument.

Conclusion - The HDI data set from the UN, overall does meet the requirements of the FAIR standards. However, the "I" or "Interoperable" is not sufficiently met compared to the others.

### Satisfying CARE Principles - HDI Dataset

Collective Benefit - The UN aims to use this data to uniformly and properly track the development of each country in the world. Some territories are also included. The UN uses this data to compare countries data from the HDI standpoint but also from other attributes like mean schooling years or gross national income (GNI). This helps the UN to best figure out what each country or region needs or is affected by the most and the UN can help with suggesting policy changes or even providing aid.

Authority to Control - The data is collected by the United Nations. They had people who were sent out to all or nearly all 195 countries during a specific time period and they collected answers to the survey questions. For countries that had little internet or wifi access, surveys were conducted in-person. While the data and subsequent graphs are available to the public. The countries themselves are unable to determine how their data is used within the report.

Responsibility - The UN analyzed the data they collected themselves and released their findings in the UN report which is a booklet written in English. There is no way to have it translated to a different language. There are no other language options which greatly minimizes who is reached especially given that nearly all 195 countries have data that has been recorded.

Ethics - Data is only summarized by country and therefore nothing confidential has been released in either the report or the raw table. It ethically obtained its data with the consent of its participants.

Conclusion - Because the HDI dataset is sufficient in most of the criteria it mostly passes the CARE principles. It's only weak on the "Responsibility" aspect of how the information is released to the public.

## Graphs and Analysis

```{r}
#Tidyverse style was followed throughout.
# Wrangling/Scraping and Cleaning of HDI and Happiness Score data 2022 -------
library(tidyverse)
library(rvest)

#scraping raw HDI 2022 Data
HDI_2022_raw <- read_html("https://countryeconomy.com/hdi") %>%
  html_elements(css = "table") %>%
  html_table()

HDI_2022 <- (HDI_2022_raw[[1]])

HDI_2022_clean <- HDI_2022 %>%
  select(-c(,3:5)) %>%
  separate_wider_delim(
    cols = Countries,
    delim = " [",
    names = c("Country", "junk")
    ) %>%
  select(-c(,2)) %>%
  rename()

happiRaw <- read.csv("hapiscore_whr.csv") # read in csv file

happiClean_2022 <- happiRaw %>%
  select(-c(geo, X2005:X2021, X2023)) %>% # removing unneeded columns
  rename(
    Happiness_Score_2022 = X2022, #rename to a more appropriate name
    Country = name
  )

```

```{r}
#| label: fig-HDIHappi2022-PLot
#| fig-cap: "A scatter plot of Countries' Human Development Index and Happiness Score for the year 2022."
#| fig-alt: "The scatterplot shows a postive correlation between a country's Human Development Index and Happiness Score, for the year 2022."
#| fig-pos: "H"
# HDI and Happiness Score 2022 Plot
# creating the combined data
HDI_HappiScore_2022 <- full_join(
  x = HDI_2022_clean,
  y = happiClean_2022,
  by = join_by(Country == Country)
)

#creating visualization HDI vs HappiScore 2022
ggplot(
  data = HDI_HappiScore_2022, # data set
  mapping = aes(
    x = HDI, # x variable 
    y = Happiness_Score_2022 # y variable
  )
) + geom_point() + labs(
  title = "Human Development Index vs Happiness Score, Year 2022", # title
  x = xlab("Human Development Index"), # x-axis label
  y = ylab("Happiness Score") # y-axis label
) + geom_smooth( # line of best fit
  method = "lm", # linear model 
  se = FALSE
)
```

```{r}
# Wrangling and Cleaning of HDI and Happiness Score data 2023 -------

HDI_raw <- read_csv("HDR25_Statistical_Annex_HDI_Table(Table 1.csv")

HDI_clean <- HDI_raw %>%
  select(-c(1, 4:16)) %>%
  slice(-c(1:7, 82, 133, 177, 204:278)) %>%
  rename("Country" = `Table 1. Human Development Index and its components`,
         "HDI" = `...3`) %>%
  mutate(
    HDI = as.numeric(HDI)
  )

happiRaw <- read.csv("hapiscore_whr.csv") # read in csv file

# cleaning the data
happiClean <- happiRaw %>%
  select(-c(geo, X2005:X2022)) %>% # removing unneeded columns
  rename(
    Happiness_Score_2023 = X2023, #rename to a more appropriate name
    Country = name
  )

happiClean_2022 <- happiRaw %>%
  select(-c(geo, X2005:X2021, X2023)) %>% # removing unneeded columns
  rename(
    Happiness_Score_2022 = X2022, #rename to a more appropriate name
    Country = name
  )
  
```
You can add options to executable code like this

```{r}
#| label: fig-HDIHappi2023-PLot
#| fig-cap: "A scatter plot of Countries' Human Development Index and Happiness Score for the year 2023."
#| fig-alt: "The scatterplot shows a postive correlation between a country's Human Development Index and Happiness Score, for the year 2023."
#| fig-pos: "H"
#  HDI and Happiness Score 2023 Plot
library(tidyverse)
library(ggplot2)


# creates full data set
HDI_Happiscore_clean <- left_join(
  x = HDI_clean,
  y = happiClean,
  by = join_by(Country == Country)
)

# HDI vs Happiness Score (2023)
ggplot(
  data = HDI_Happiscore_clean,
  mapping = aes(
    x = HDI, # x variable
    y = Happiness_Score_2023 # y variable
  )
) + geom_point() + labs(
  title = "Human Development Index vs Happiness Score, Year 2023", # title
  y = ylab("Happiness Score"), # x axis 
  x = xlab("Human Development Index") # y axis
) + geom_smooth(
  method = "lm", # creates best fit line
  se = FALSE # removes shaded part
)

```


## Author Contribution

## Code Appendix
```{r codeAppend, ref.label=knitr::all_labels(), echo=TRUE, eval=FALSE}

```
